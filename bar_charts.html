<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dataviz Exercise</title>
</head>

<body>

    <h1>Dataviz Exercise</h1>

    <h2>Bar Charts</h2>
    <div id="bar-chart-container"></div>
    <br>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript">

        console.log("MAKING SOME CHARTS...")

        // EXAMPLE FROM THE DOCS
            // https://plotly.com/javascript/bar-charts/

        var data = [
            {
                x: ['giraffes', 'orangutans', 'monkeys'],
                y: [20, 14, 23],
                type: 'bar'
            }
        ];
        Plotly.newPlot('bar-chart-container', data);


        // SETUP

        var barData = [
            {"genre":"Thriller", "viewers":123456},
            {"genre":"Mystery", "viewers":234567},
            {"genre":"Sci-Fi", "viewers":987654},
            {"genre":"Fantasy", "viewers":876543},
            {"genre":"Documentary", "viewers":283105},
            {"genre":"Action", "viewers":544099},
            {"genre":"Romantic Comedy", "viewers":121212}
        ] // leave this data as is

        console.log("BAR DATA", barData)


        // IMPLEMENTATION: METHOD 1
        // put genres on x axis, viewers on y axis
            // x: var genres = ['giraffes', 'orangutans', 'monkeys']
            // y: var viewers = [20, 14, 23]

        var genres = []
        var viewers = []

        barData.forEach(function(item){
            genres.push(item["genre"])
            viewers.push(item["viewers"])
        })
        console.log("GENRES", genres)
        console.log("VIEWERS", viewers)


        // IMPLEMENTATION: METHOD 2 (MAPPING)
        // Loop in place using the array's map method to transform the original items in the array

        var genres = barData.map(function(item){
            return item["genre"]
        })
        var viewers = barData.map(function(item){
            return item["viewers"]
        })
        console.log("GENRES", genres)
        console.log("VIEWERS", viewers)


        // IMPLEMENTATION: METHOD 3 (MAPPING IN-PLACE WITH ONE-LINER ARROW FUNCTION)
        // One-liner functions using the arrow syntax
        
        var genres = barData.map(item => item["genre"])
        var viewers = barData.map(item => item["viewers"])
        console.log("GENRES", genres)
        console.log("VIEWERS", viewers)


        // modify this example, passing in some aspects of our data structure

        var data = [{x: genres, y: viewers, type: 'bar'}]
        Plotly.newPlot('bar-chart-container', data)    

    </script>

</body>

</html>